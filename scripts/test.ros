#!/bin/sh
#|-*- mode:lisp -*-|#
#|
exec ros -Q -- $0 "$@"
|#
(progn ;;init forms
  (ros:ensure-asdf)
  #+quicklisp(ql:quickload '(:fiveam :str :alexandria) :silent t)

  ;; Ensure the test system definition is loaded relative to this script
  (let ((script-dir (uiop:pathname-directory-pathname *load-pathname*)))
    (push script-dir asdf:*central-registry*))
  ;; Load the test system
  (asdf:load-system :scsd-test :force t)
)

(defpackage :ros-script.test.3862003172
  (:use :cl))
(in-package :ros-script.test.3862003172)

(defun main (&rest argv)
  (declare (ignorable argv))
  ;; Run the tests
  (let ((results (scsd-test:run-tests)))
    ;; Exit with non-zero status if tests failed
    ;; Fixed: Use results-status instead of results-p
    (unless (fiveam:results-status results) 
      (uiop:quit 1))))

;;; vim: set ft=lisp lisp:
